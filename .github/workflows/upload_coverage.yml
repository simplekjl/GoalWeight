name: Test
on: [push, pull_request]
jobs:
  run-tests:
      needs: [ test ]
      name: coverage
      runs-on: ubuntu-latest
      steps:
        - uses: actions/checkout@master
        - uses: actions/setup-node@master
          with:
            node-version: '12'
        - run: npm install -g yarn
        - run: yarn install
        - run: yarn build
        - uses: paambaati/codeclimate-action@v3.0.0
          env:
            CC_TEST_REPORTER_ID: ${{ secrets.CC_TEST_REPORTER_ID }}
          with:
            coverageCommand: yarn run coverage
            debug: true