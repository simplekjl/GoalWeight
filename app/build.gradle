plugins {
    id 'com.android.application'
    id 'org.jetbrains.kotlin.android'
    id 'kotlin-kapt'
    id 'androidx.navigation.safeargs'
}

apply from: "$rootProject.projectDir/ktlint.gradle"

android {
    compileSdk 32

    defaultConfig {
        applicationId "com.simplekjl.trackit"
        minSdk 23
        targetSdk 32
        versionCode 1
        versionName "1.0"

        testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
        vectorDrawables {
            useSupportLibrary true
        }
    }

    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
    }
    compileOptions {
        sourceCompatibility JavaVersion.VERSION_11
        targetCompatibility JavaVersion.VERSION_11
    }
    kotlinOptions {
        jvmTarget = '1.8'
    }
    buildFeatures {
        viewBinding true
        compose true
    }
    composeOptions {
        kotlinCompilerExtensionVersion compose_version
    }
    packagingOptions {
        resources {
            excludes += '/META-INF/{AL2.0,LGPL2.1}'
        }
    }
}

dependencies {

    implementation fileTree(dir: 'libs', include: ['*.jar'])

    implementation project(path: ':domain')
    implementation project(path: ':data')
    implementation project(path: ':common:ui')

    implementation AndroidX.lifecycleRuntime
    implementation AndroidX.activityCompose
    implementation AndroidX.appCompat
    implementation AndroidX.core
    implementation AndroidX.annotationLib
    implementation AndroidX.recyclerView
    implementation AndroidX.cardView
    implementation AndroidX.constraintLayout
    implementation AndroidX.activityCompose
    implementation AndroidX.navigationFragment

    implementation Utils.easyPermissions

    implementation Net.retrofit
    implementation Net.okHttpLogging

    implementation Google.material

    implementation AndroidLifecycle.viewModel
    implementation AndroidLifecycle.liveData

    implementation Koin.android
    implementation Koin.core
    implementation Koin.compose
    implementation Koin.workManager
    implementation Koin.test

    kapt AndroidLifecycle.compiler

    implementation Compose.ui
    implementation Compose.toolingPreview
    implementation Compose.foundation
    implementation Compose.material
    implementation Compose.lifecycleViewModel
    implementation Compose.runtimeLiveData
    debugImplementation Compose.tooling

    implementation Coroutines.core
    implementation Coroutines.android

    implementation Net.gsonConverter
    implementation Net.moshiKotlin

    debugImplementation Net.chuckerDebug
    releaseImplementation Net.chuckerRelease

    debugImplementation Compose.tooling

    testImplementation TestLib.junit
    implementation 'com.github.PhilJay:MPAndroidChart:v3.1.0'
    implementation 'androidx.work:work-runtime-ktx:2.7.1'

    androidTestImplementation TestLib.androidRunner
    androidTestImplementation TestLib.androidRules
    androidTestImplementation TestLib.espressoCore

    androidTestImplementation Compose.testJunit
    debugImplementation Compose.testManifest
}